<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HoneyBee Wrapper</title>
  <link rel="icon" type="image/png" href="/logo.png" />
  <link rel="stylesheet" href="/styles.css" />
  <link rel="stylesheet" href="/ui.css" />
</head>
<body>
  <div id="app">
    <aside class="sidebar" id="sidebar">
      <div class="logo-row">
        <div class="logo">HoneyBee üêù</div>
        <button id="collapseSidebar" class="btn small" aria-pressed="false" title="Toggle sidebar">‚â°</button>
      </div>
      <nav class="side-nav" role="navigation">
        <button data-tab="dashboard" class="active">üè† <span class="label">Dashboard</span></button>
        <button data-tab="console">üñ• <span class="label">Console</span></button>
        <button data-tab="files">üìÅ <span class="label">Files</span></button>
        <button data-tab="plugins">üîå <span class="label">Plugins</span></button>
        <button data-tab="backups">üóÑ <span class="label">Backups</span></button>
        <button data-tab="servers">üß≠ <span class="label">Servers</span></button>
        <button data-tab="worlds">üåê <span class="label">Worlds</span></button>
        <button data-tab="updates">‚¨ÜÔ∏è <span class="label">Updates</span></button>
        <button data-tab="optimize">‚ö° <span class="label">Optimize</span></button>
        <button data-tab="settings">‚öôÔ∏è <span class="label">Settings</span></button>
        <button data-tab="account">üë§ <span class="label">Account</span></button>
      </nav>
    </aside>

    <main class="main">
      <header class="topbar">
        <div class="top-left">
          <button id="menuBtn" class="btn small" aria-pressed="false" title="Toggle menu">‚ò∞</button>
          <div class="brand">
            <img id="brandLogo" src="/logo.png" alt="HoneyBee" class="brand-logo" onerror="this.classList.add('hidden')" />
            <span>HoneyBee Wrapper</span>
          </div>
          <div class="pill status" id="headerStatus">--</div>
        </div>
        <div class="topbar actions">
          <div id="activeInstanceWrapper" class="active-instance-wrapper">
            <button id="activeInstanceBtn" class="btn small" aria-expanded="false">Active: <span id="activeInstanceLabel">(none)</span> ‚ñæ</button>
            <div id="activeInstanceDropdown" class="active-instance-dropdown hidden" role="menu" aria-hidden="true"></div>
          </div>
          <button id="updatesBtn">Updates</button>

          <button id="logoutBtn" class="btn small">Logout</button>
        </div>
      </header>
    <div class="container">
      <section id="dashboard" class="tab active">
        <div class="grid">
          <div class="card">
            <h3>Status</h3>
            <div id="statusText"></div>
            <button id="startBtn" class="btn-accent">Start</button>
            <button id="stopBtn" class="btn-warning">Stop</button>
            <button id="restartBtn" class="btn">Restart</button>
            <button id="killBtn" class="btn-danger">Kill</button>
          </div>
          <div class="card">
            <h3>Metrics</h3>
            <div>CPU: <span id="cpu"></span>%</div>
            <div>RAM: <span id="ram"></span></div>
            <div>Disk: <span id="disk"></span></div>
            <div>TPS: <span id="tps"></span></div>
            <div>Players: <span id="players"></span></div>
          </div>
          <div class="card" id="logsCard">
            <h3>Logs</h3>
            <pre id="logsPreview"></pre>
          </div>
        </div>
      </section>
      <section id="updates" class="tab hidden">
        <div class="card">
          <h3>Updates</h3>
          <div class="row">
            <button id="checkUpdatesTab">Check for Updates</button>
            <button id="applyUpdateTab">Apply Update</button>
          </div>
          <pre id="updatesOutTab"></pre>
        </div>
      </section>
      <section id="console" class="tab hidden">
        <div class="card">
          <div class="row">
            <button id="consoleStart" class="btn-accent">Start</button>
            <button id="consoleStop" class="btn-warning">Stop</button>
            <button id="consoleRestart" class="btn">Restart</button>
            <button id="consoleKill" class="btn-danger">Kill</button>
            <div style="flex:1"></div>
            <button id="consoleJumpLast">Jump to last line</button>
          </div>
          <div class="card" style="background: rgba(0,0,0,0.2); padding: 12px; margin-bottom: 12px;">
            <h4 style="margin: 0 0 8px 0; color: #4bd66a; font-size: 0.95em;">Server Metrics</h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 8px;">
              <div style="display: flex; justify-content: space-between; padding: 4px 8px; background: rgba(255,255,255,0.03); border-radius: 4px;">
                <span style="color: #aaa;">CPU:</span>
                <span id="consoleCpu" style="color: #fff; font-weight: 500;">0.0% / 100%</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 4px 8px; background: rgba(255,255,255,0.03); border-radius: 4px;">
                <span style="color: #aaa;">RAM:</span>
                <span id="consoleRam" style="color: #fff; font-weight: 500;">0 GB / 0 GB</span>
              </div>
              <div style="display: flex; justify-content: space-between; padding: 4px 8px; background: rgba(255,255,255,0.03); border-radius: 4px;">
                <span style="color: #aaa;">Disk Usage:</span>
                <span id="consoleDisk" style="color: #fff; font-weight: 500;">0 MB / 0 GB</span>
              </div>
            </div>
          </div>
          <div class="console" id="consoleOut"></div>
          <div class="row">
            <input id="consoleIn" placeholder="Enter command" />
            <button id="sendCmd">Send</button>
            <button id="downloadLog">Download Log</button>
          </div>
        </div>
      </section>
      <section id="files" class="tab hidden">
        <div class="row">
          <input id="pathInput" value="." />
          <button id="browseBtn">Browse</button>
          <button id="backBtn">Back</button>
          <input type="file" id="uploadFile" multiple />
          <button id="uploadBtn">Upload</button>
          <button id="uploadTargetsBtn">Select Servers</button>
          <span id="uploadTargetsSummary"></span>
          <button id="selectAllFiles">Select All</button>
          <button id="downloadSelected">Download Selected</button>
          <button id="compressSelected">Compress Selected</button>
          <button id="deleteSelected">Delete Selected</button>
          <div id="fileUploadProgress" class="progress hidden"><div class="progress-bar" id="fileUploadBar"></div><span class="progress-text" id="fileUploadText"></span></div>
        </div>
        <table id="fileTable"></table>
        <div id="editor" class="modal-overlay hidden">
          <div class="modal">
            <div class="row">
              <div id="editorPath"></div>
              <div style="flex:1"></div>
              <button id="editorClose">Close</button>
              <button id="editorSave">Save</button>
            </div>
            <textarea id="editorContent" spellcheck="false"></textarea>
          </div>
        </div>
      </section>
      <section id="plugins" class="tab hidden">
        <div class="row">
          <input type="file" id="pluginFile" multiple />
          <button id="pluginUpload">Upload</button>
          <button id="pluginSelectAll">Select All</button>
          <button id="pluginDeleteSelected">Delete Selected</button>
          <div id="pluginUploadProgress" class="progress hidden"><div class="progress-bar" id="pluginUploadBar"></div><span class="progress-text" id="pluginUploadText"></span></div>
        </div>
        <table id="pluginTable"></table>
      </section>
      <section id="backups" class="tab hidden">
        <div class="row">
          <button id="backupCreate">Create Backup</button>
        </div>
        <table id="backupTable"></table>
      </section>
      <section id="servers" class="tab hidden">
        <div class="card">
          <h3>Servers</h3>
          <div class="row">
            <input id="serverName" placeholder="New server name" />
            <button id="serverCreate" class="btn-accent">Create</button>
            <div style="flex:1"></div>
            <span id="serverActive"></span>
          </div>
          <div class="row">
            <button id="serverStartAll" class="btn-accent">Start All</button>
            <button id="serverStopAll">Stop All</button>
            <button id="serverKillAll" class="btn-danger">Kill All</button>
          </div>
          <table id="serverTable"></table>
        </div>
      </section>
      <section id="worlds" class="tab hidden">
        <div class="row">
          <button id="saveAll">Save All</button>
        </div>
        <table id="worldTable"></table>
      </section>
      <section id="settings" class="tab hidden">
        <div class="grid settings-grid">
          <div class="card">
            <h3>Wrapper Config</h3>
            <div class="form-grid">
              <div class="form-row"><label class="form-label">Instance Root</label><input id="cfgInstanceRoot" class="form-input" /></div>
              <div class="form-row"><label class="form-label">Java Path</label><input id="cfgJavaPath" class="form-input" /></div>
              <div class="form-row"><label class="form-label">Server Jar</label><input id="cfgServerJar" class="form-input" /></div>
              <div class="form-row"><label class="form-label">JVM Args</label><textarea id="cfgJvmArgs" rows="6" class="form-input"></textarea></div>
              <div class="form-row"><label class="form-label">Auto Restart</label><label class="switch"><input type="checkbox" id="cfgAutoRestart"><span class="slider"></span></label></div>
              <div class="form-row"><label class="form-label">Max Backoff (s)</label><input id="cfgMaxBackoff" type="number" min="1" class="form-input" /></div>
            </div>
            <div class="row">
              <button id="cfgSave">Save Config</button>
              <span id="cfgNote">Wrapper restart required to apply config.</span>
            </div>
          </div>
        </div>
      </section>

      <section id="account" class="tab hidden">
        <div class="card">
          <h3>Account</h3>
          <div class="row">
            <label class="form-label">Account</label>
            <select id="acctSelect" class="form-input"></select>
          </div>
          <div class="row" id="currentPwdRow">
            <label class="form-label">Current Password</label>
            <input id="acctCurrentPwd" type="password" class="form-input" />
          </div>
          <div class="row">
            <label class="form-label">New Password</label>
            <input id="acctNewPwd" type="password" class="form-input" />
          </div>
          <div class="row">
            <label class="form-label">Confirm New Password</label>
            <input id="acctNewPwd2" type="password" class="form-input" />
          </div>
          <div class="row">
            <button id="acctSave" class="btn">Save Password</button>
          </div>
        </div>
      </section>
      <section id="optimize" class="tab hidden">
        <div class="grid settings-grid">
          <div class="card">
            <h3>Device Specifications</h3>
            <div class="form-grid">
              <div class="form-row">
                <label class="form-label">Device Type</label>
                <div id="deviceType" class="form-input-display">Detecting...</div>
              </div>
              <div class="form-row">
                <label class="form-label">CPU Cores</label>
                <div id="cpuCores" class="form-input-display">Detecting...</div>
              </div>
              <div class="form-row">
                <label class="form-label">System RAM</label>
                <div id="systemRam" class="form-input-display">Detecting...</div>
              </div>
              <div class="form-row">
                <label class="form-label">Device Memory (Browser Estimate)</label>
                <div id="deviceMemory" class="form-input-display">Detecting...</div>
              </div>
            </div>
          </div>
          <div class="card">
            <h3>RAM Allocation</h3>
            <div class="form-grid">
              <div class="form-row">
                <label class="form-label">Available for Server (MB)</label>
                <input id="allocatedRam" type="number" min="512" step="256" class="form-input" />
              </div>
              <div class="form-row">
                <label class="form-label">Recommendation</label>
                <div id="ramRecommendation" class="form-input-display">Based on your device specs</div>
              </div>
              <div class="form-row">
                <label class="form-label">RAM Slider</label>
                <div class="slider-container">
                  <input id="ramSlider" type="range" min="256" max="12288" step="256" value="2048" class="slider-input" />
                  <span id="ramPercentage" class="percentage-display">2048 MB</span>
                </div>
              </div>
            </div>
          </div>
          <div class="card">
            <h3>Performance Optimization</h3>
            <div class="form-grid">
              <div class="form-row">
                <label class="form-label">Optimization Profile</label>
                <select id="optimizationProfile" class="form-input">
                  <option value="low">Low-End Device (512MB - 2GB)</option>
                  <option value="medium">Medium Device (2GB - 6GB)</option>
                  <option value="high">High-End Device (6GB+)</option>
                  <option value="custom">Custom</option>
                </select>
              </div>
              <div class="form-row">
                <label class="form-label">Enable Aikar Flags</label>
                <label class="switch"><input type="checkbox" id="optAikarFlags" checked><span class="slider"></span></label>
              </div>
            </div>
          </div>
          <div class="card">
            <h3>JVM Arguments</h3>
            <div class="form-grid">
              <div class="form-row">
                <label class="form-label">Generated JVM Args</label>
                <textarea id="optimizedJvmArgs" rows="8" class="form-input" readonly></textarea>
              </div>
            </div>
            <div class="row">
              <button id="applyOptimization" class="btn-accent">Apply Optimization</button>
              <button id="resetOptimization" class="btn">Reset to Default</button>
              <button id="refreshSpecs" class="btn">Refresh Specs</button>
            </div>
          </div>
        </div>
      </section>
    </div>
    </main>
    <div id="sidebarBackdrop" class="sidebar-backdrop hidden" aria-hidden="true"></div>
    <div id="loadingOverlay" class="loading-overlay hidden"><div class="spinner"></div></div>
    <div id="updatesModal" class="modal-overlay hidden">
      <div class="modal">
        <div class="row">
          <h3>Updates</h3>
          <div style="flex:1"></div>
          <button id="updatesClose">Close</button>
        </div>
        <div class="row">
          <button id="checkUpdates">Check for Updates</button>
          <button id="applyUpdate">Apply Update</button>
        </div>
        <pre id="updatesOut"></pre>
      </div>
    </div>
    <div id="confirm" class="modal-overlay hidden">
      <div class="modal">
        <div id="confirmText" style="margin-bottom:12px"></div>
        <div class="row">
          <button id="confirmYes" class="btn-danger">Delete</button>
          <button id="confirmNo">Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <div id="uploadTargetsModal" class="modal-overlay hidden">
    <div class="modal">
      <div class="row">
        <h3>Select Servers</h3>
        <div style="flex:1"></div>
        <button id="uploadTargetsClose">Close</button>
      </div>
      <div id="uploadTargetsList"></div>
      <div class="row">
        <button id="uploadTargetsSave" class="btn-accent">Save</button>
        <button id="uploadTargetsClear">Clear</button>
      </div>
    </div>
  </div>
  <div id="optimizationNotification" class="optimization-notification hidden">
    <div class="notification-content">
      <span class="notification-icon">‚ö°</span>
      <div class="notification-text">
        <div class="notification-title">Server Optimized</div>
        <div class="notification-message">Please restart the server to apply changes</div>
      </div>
      <button class="notification-close" id="closeOptNotification">‚úï</button>
    </div>
  </div>
  <script src="/app.js"></script>
</body>
</html>
